Модул за качване на файлове
===========================

Модулът служи за качване на файлове, които да се показват като изображения или хипервръзки в интернет страниците на сайта.
За да се използва този модул, в html кода на страницата се вмъква:

<!--$$_UPLOADFILE_XX[,nn,tt]_$$-->

Където:
XX е уникално за дадената страница име, с което се идентифицира файла.
nn е незадължителен втори параметър, който се отделя от името със запетая и представлява номер на страница, за която се отнася файла. Ако файлът се отнася за текущата страница, не е необходим, но ако един файл трябва да се покаже и на други страници, трябва да се посочи този номер, за да може точно да се идентифицира файла.
tt - незадължителен трети параметър, който определя какво да се показва ако няма качен файл:
2 - да се показва надпис "Няма качен файл"
1 - да се показва текст без хипревръзката и
0 - да не се показва нищо.

В нормален режим на мястото на горния елемент се показва хипервръзка към качения файл, а ако още не е качен файл - надпис "Няма качен файл" или не се показва нищо ако опция uploadfile_nofilenotext е 'true'.

В режим на редактиране след надписа на хипервръзката се показват знаци + и -, които служат съответно за качване или премахване на файла.

Настройки, които се задават в таблица $tn_prefix.'options'
---------------------------------------------------------

uploadfile_dir - интернет директория, в която се съхраняват качваните файлове. Ако не се зададе се използва директорията на модула.

uploadfile_deletefileonly - ако има стойност 'true' се изтрива само файла от сарвъра, а в записа му в базата данни - само полето `filename`. Така надписът продължава да се изписва на страницата, но без да е хипервръзка. Ако стойността не е 'true', се изтрива както файла от сървъра, така и записа му от таблица $tn_prefix.'files' и на мястото на хипервръзката се изписва "Няма качен файл".

uploadfile_nofilenotext - ако има стойност 'true', когато няма качен файл в интернет страниците не се показва никакъв надпис, освен в режим на редактиране. Тази опция се отменя локално чрез третия параметър tt, изпращан на функцията на модула.

uploadfile_otherroot - използва се, когато сайтът се премества на друг сървър. Тогава в базата данни ще стоят пътищата до тях от стария сървър и за да бъдат разпознати на новия сървър се задава тази настройка. Тя съдържа пътя до document_root директорията на стария сървър. Ако пътищата до файловете в базата данни започват с този стринг, той автоматично се заменя с $_SERVER['DOCUMENT_ROOT'] на новия сървър и така се получават правилните пътища до файловете на новия сървър.

